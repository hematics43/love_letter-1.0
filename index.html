<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Amatic+SC&family=Berkshire+Swash&family=Caveat&family=Cookie&family=Dancing+Script&family=Indie+Flower&family=Lobster&family=Montserrat&family=Pacifico&family=Patua+One&family=Playfair+Display&family=Roboto&family=Satisfy&family=Shadows+Into+Light&display=swap" rel="stylesheet">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>love letter 1.0</title>
<style>
  .download-btn {
  display: inline-block;
  background: #2d0614;
  border: none;
  padding: 10px 20px;
  color: rgb(239, 232, 232);
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 1rem;
  border-radius: 25px;
  cursor: pointer;
  box-shadow: 0 0 10px #ec9191;
  transition: background 0.3s ease;
  user-select: none;
  margin-left: 0px;
  animation: colorGlow 3s linear infinite;

}
.color-btn {
  animation: colorGlow 3s linear infinite;
  display: inline-block;
  background: #2d0614;
  border: none;
  padding: 10px 20px;
  color: rgb(0, 0, 0);
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 1rem;
  border-radius: 25px;
  cursor: pointer;
  box-shadow: 0 0 10px #ec9191;
  transition: background 0.3s ease;
  user-select: none;
  margin-bottom: 0px;
}
  @keyframes colorGlow {
  0% {
    color: #ff3366;
    text-shadow: 0 0 5px #ff6699, 0 0 10px #ff3366;
  }
  25% {
    color: #ff66cc;
    text-shadow: 0 0 10px #ff99cc, 0 0 20px #ff66cc;
  }
  50% {
    color: #ff3399;
    text-shadow: 0 0 15px #ff66cc, 0 0 30px #ff3399;
  }
  75% {
    color: #ff6699;
    text-shadow: 0 0 10px #ff99cc, 0 0 20px #ff6699;
  }
  100% {
    color: #ff3366;
    text-shadow: 0 0 5px #ff6699, 0 0 10px #ff3366;
  }
}

.glowing-heading {
  text-align: center;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  font-size: clamp(1.5rem, 5vw, 3rem); /* scales between 1.5rem and 3rem */
  animation: colorGlow 6s linear infinite;
  user-select: none;
  margin: 1rem auto 2rem auto;
  padding: 0 1rem;
  word-wrap: break-word;
}


  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
      Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    background: #1e1e2f;
    margin: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    color: #eee;
    overflow-x: hidden;
  }
  #controls {
    margin-bottom: 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 14px 18px;
    align-items: center;
    justify-content: center;
    max-width: 600px;
    width: 100%;
  }
  label {
    font-weight: 600;
    font-size: 1rem;
  }
  select, button {
    padding: 8px 14px;
    font-size: 1rem;
    border-radius: 6px;
    border: 1.5px solid #ccc;
    background: white;
    color: #222;
    cursor: pointer;
    transition: border-color 0.3s ease;
  }
  select:focus, button:focus {
    outline: none;
    border-color: #ff6b6b;
    box-shadow: 0 0 6px rgba(255,107,107,0.5);
  }
  button {
    background-color: #ff6b6b;
    color: white;
    border: none;
    font-weight: 700;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #e14b4b;
  }

  /* Love letter box */
  .love-letter {
    position: relative;
    width: 100%;
    max-width: 600px;
    min-height: 420px;
    padding: 30px 38px;
    border-radius: 16px;
    box-shadow: 0 12px 25px rgba(0,0,0,0.7);
    background: white;
    color: #333;
    line-height: 1.6;
    user-select: text;
    outline: none;
    transition: background 0.4s ease, box-shadow 0.4s ease;
    overflow: hidden;
  }
  .love-letter:focus-within {
    box-shadow: 0 12px 35px rgba(255, 107, 107, 0.7);
  }

  /* Paper styles with colorful CSS backgrounds */
  .paper-style-1 {
  background: linear-gradient(135deg, #ffe6f0, #ffb3d9);
  border: 2px solid #ff66b3;
  box-shadow: inset 0 0 15px #ff99cc;
}

.paper-style-2 {
  background: linear-gradient(135deg, #fff4cc, #ffd633);
  border: 3px dashed #ffaa00;
  box-shadow: 0 0 10px #ffbb33;
}

.paper-style-3 {
  background: linear-gradient(45deg, #cce7ff, #6699ff);
  border-left: 8px solid #3366cc;
  box-shadow: 0 0 12px #3399ff;
}

.paper-style-4 {
  background: linear-gradient(135deg, #ffe0b3, #ff9933);
  border: 2px solid #cc7000;
  box-shadow: 0 0 15px #ffb84d;
}

.paper-style-5 {
  background: linear-gradient(135deg, #f0f5ff, #a3bffa);
  border: 3px double #668cff;
  box-shadow: inset 0 0 8px #99b3ff;
}

.paper-style-6 {
  background: linear-gradient(135deg, #fff0f5, #ff66cc);
  border: 3px solid #cc3399;
  box-shadow: inset 0 0 10px #ff99cc;
}

.paper-style-7 {
  background: linear-gradient(45deg, #eafff5, #66ffcc);
  border: 2px solid #33cc99;
  box-shadow: 0 0 15px #66ffcc;
}

.paper-style-8 {
  background: linear-gradient(135deg, #fff6f0, #ffb380);
  border: 2px solid #ff704d;
  box-shadow: 0 0 12px rgba(255,112,77,0.6);
}

.paper-style-9 {
  background: linear-gradient(135deg, #e8f0ff, #6699ff);
  border: 4px ridge #3366cc;
  box-shadow: 0 0 20px #99bbff;
}

.paper-style-10 {
  background: repeating-linear-gradient(
    45deg,
    #fffaf0,
    #fffaf0 12px,
    #ffdab3 12px,
    #ffdab3 24px
  );
  border: 2px solid #ffb84d;
  box-shadow: 0 0 15px #ffcc80;
}

  /* Glowing theme */
  .paper-style-11 {
    background: linear-gradient(135deg, #2e003e, #7b00ff);
    border: 3px solid #b84eff;
    box-shadow:
      0 0 8px #b84eff,
      0 0 20px #9b36ff,
      0 0 40px #7b00ff;
    color: #fff;
  }

  /* Fonts fallback system fonts */
 .font-pacifico {
  font-family: 'Pacifico', cursive, 'Comic Sans MS', cursive, sans-serif;
}

.font-dancing-script {
  font-family: 'Dancing Script', cursive, 'Lucida Handwriting', 'Segoe Script', cursive, sans-serif;
}

.font-indie-flower {
  font-family: 'Indie Flower', cursive, 'Brush Script MT', cursive, sans-serif;
}

.font-roboto {
  font-family: 'Roboto', Arial, Helvetica, sans-serif;
}

.font-times-new-roman {
  font-family: 'Times New Roman', Times, serif;
}

.font-satisfy {
  font-family: 'Satisfy', cursive, 'Comic Sans MS', cursive, sans-serif;
}

.font-cookie {
  font-family: 'Cookie', cursive, 'Lucida Handwriting', cursive, sans-serif;
}

.font-caveat {
  font-family: 'Caveat', cursive, 'Brush Script MT', cursive, sans-serif;
}

.font-patua-one {
  font-family: 'Patua One', cursive, 'Times New Roman', serif;
}

.font-shadows-into-light {
  font-family: 'Shadows Into Light', cursive, 'Segoe Script', cursive, sans-serif;
}

/* More fonts */

.font-lobster {
  font-family: 'Lobster', cursive, 'Comic Sans MS', cursive, sans-serif;
}

.font-amatic-sc {
  font-family: 'Amatic SC', cursive, 'Lucida Handwriting', cursive, sans-serif;
}

.font-berkshire-swash {
  font-family: 'Berkshire Swash', cursive, 'Brush Script MT', cursive, sans-serif;
}

.font-abril-fatface {
  font-family: 'Abril Fatface', serif, 'Times New Roman', serif;
}

.font-montserrat {
  font-family: 'Montserrat', sans-serif, Arial, Helvetica, sans-serif;
}

.font-playfair-display {
  font-family: 'Playfair Display', serif, 'Georgia', serif;
}


  /* Editable text */
  .editable {
    outline: none;
    cursor: text;
  }
  .title {
    font-size: 2.4rem;
    margin-bottom: 16px;
    font-weight: 700;
  }
  .message {
    font-size: 1.3rem;
    margin-bottom: 26px;
  }
  .sender {
    font-size: 1.05rem;
    text-align: right;
    font-style: italic;
  }

  /* Accessibility helper */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0,0,0,0);
    border: 0;
  }

  /* Emoji panel */
  #emojiPanel {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #2e003e;
    border-top: 3px solid #b84eff;
    padding: 8px 12px;
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    gap: 12px;
    z-index: 1000;
  }
  #emojiPanel::-webkit-scrollbar {
    height: 8px;
  }
  #emojiPanel::-webkit-scrollbar-thumb {
    background-color: #b84eff;
    border-radius: 4px;
  }
  .emoji {
    font-size: 28px;
    cursor: grab;
    user-select: none;
    transition: transform 0.2s ease;
  }
  .emoji:active {
    cursor: grabbing;
    transform: scale(1.2);
  }

  /* Draggable emoji style */
  .dragging {
    position: absolute;
    pointer-events: none;
    user-select: none;
    z-index: 9999;
    cursor: grabbing !important;
    transition: none !important;
    font-size: 32px !important;
  }

  /* Responsive */
  @media (max-width: 650px) {
    body {
      margin: 10px 8px 80px 8px; /* bottom space for emoji panel */
    }
    #controls {
      flex-direction: column;
      gap: 12px;
    }
    .love-letter {
      padding: 20px 24px;
      min-height: 360px;
    }
    .title {
      font-size: 2rem;
    }
    .message {
      font-size: 1.1rem;
    }
    .sender {
      font-size: 1rem;
    }
    #emojiPanel {
      padding: 6px 10px;
      gap: 10px;
    }
    .emoji {
      font-size: 24px;
    }
    .dragging {
      font-size: 28px !important;
    }
  }
  .subheading {
  text-align: center;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  font-size: clamp(1rem, 3vw, 1.5rem);
  text-shadow: 0 0 5px #f7057e;
  margin: 0 0 2rem 0;
  user-select: none;
  padding: 0 1rem;
  word-wrap: break-word;
  animation: colorGlow 6s linear infinite;

}

</style>
</head>
<body>
<h1 class="glowing-heading">‚ù§Ô∏è Love Letter From ‚ù£Ô∏èLove, To Love‚ù§Ô∏è</h1>
<h2 class="subheading">üíüLet your feelings ‚ú®shine brighter than ever!</h2>


<div id="controls" aria-label="Controls for love letter">
  <label>
  <select id="paperStyleSelect" aria-describedby="paperStyleDesc">
    <option value="paper-style-1" selected>Style 1</option>
    <option value="paper-style-2">Style 2</option>
    <option value="paper-style-3">Style 3</option>
    <option value="paper-style-4">Style 4</option>
    <option value="paper-style-5">Style 5</option>
    <option value="paper-style-6">Style 6</option>
    <option value="paper-style-7">Style 7</option>
    <option value="paper-style-8">Style 8</option>
    <option value="paper-style-9">Style 9</option>
    <option value="paper-style-10">Style 10</option>
    <option value="paper-style-11">Glowing Theme</option>
  </select>
  <span id="paperStyleDesc" class="sr-only">Select the background style of the letter</span>

  
<select id="fontSelect" aria-describedby="fontDesc">
  <option value="font-pacifico" selected>Pacifico</option>
  <option value="font-dancing-script">Dancing Script</option>
  <option value="font-indie-flower">Indie Flower</option>
  <option value="font-roboto">Roboto</option>
  <option value="font-times-new-roman">Times New Roman</option>
  <option value="font-satisfy">Satisfy</option>
  <option value="font-cookie">Cookie</option>
  <option value="font-caveat">Caveat</option>
  <option value="font-patua-one">Patua One</option>
  <option value="font-shadows-into-light">Shadows Into Light</option>
  <option value="font-lobster">Lobster</option>
  <option value="font-amatic-sc">Amatic SC</option>
  <option value="font-berkshire-swash">Berkshire Swash</option>
  <option value="font-abril-fatface">Abril Fatface</option>
  <option value="font-montserrat">Montserrat</option>
  <option value="font-playfair-display">Playfair Display</option>
</select>
</label>

  <span id="fontDesc" class="sr-only">Select font style for the letter</span>
<div><button id="colorBtn" class="color-btn">Change Font Color</button>
<button id="downloadBtn" class="download-btn">Download as PNG</button></div>
</div>

<div id="loveLetter" class="love-letter paper-style-1 font-pacifico" contenteditable="false" role="main" aria-label="Editable love letter">
  <h1 class="title editable" contenteditable="true" spellcheck="true" aria-label="Edit title">My Dearest Love,</h1>
  <p class="message editable" contenteditable="true" spellcheck="true" aria-label="Edit message">
    You are the light of my life and the joy in my heart. Every moment with you is a treasure that I cherish deeply.
  </p>
  <p class="sender editable" contenteditable="true" spellcheck="true" aria-label="Edit sender">
    With all my love,<br />Your Forever
  </p>
</div>

<!-- Emoji panel -->
<div id="emojiPanel" aria-label="Emoji selection panel" role="region" tabindex="0">
  <!-- Emoji buttons will be inserted here -->
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
  const loveLetter = document.getElementById('loveLetter');
  const paperStyleSelect = document.getElementById('paperStyleSelect');
  const fontSelect = document.getElementById('fontSelect');
  const downloadBtn = document.getElementById('downloadBtn');
  const emojiPanel = document.getElementById('emojiPanel');

  // Paper & font style update
  function updateStyles() {
    loveLetter.className = 'love-letter ' + paperStyleSelect.value + ' ' + fontSelect.value;
  }
  paperStyleSelect.addEventListener('change', updateStyles);
  fontSelect.addEventListener('change', updateStyles);

  // Download PNG
  downloadBtn.addEventListener('click', async () => {
    document.activeElement.blur();

    // Temporarily remove draggable emojis' pointer events to avoid capture issues
    const emojis = loveLetter.querySelectorAll('.draggable-emoji');
    emojis.forEach(e => e.style.pointerEvents = 'none');

    const canvas = await html2canvas(loveLetter, {
      backgroundColor: null,
      scale: window.devicePixelRatio * 2,
      useCORS: true,
      scrollY: -window.scrollY,
    });

    emojis.forEach(e => e.style.pointerEvents = 'auto');

    const link = document.createElement('a');
    link.download = 'love_letter.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
  });

  // Emoji list (common love/heart emojis + some cute ones)
  const emojis = [
  '‚ù§Ô∏è', 'üòç', 'ü•∞', 'üòò', 'üíñ', 'üíï', 'üíå', 'üåπ', 'üíê', '‚ú®',
  'üòä', 'üíû', '‚ù£Ô∏è', 'üåü', 'üí´', 'üíó', 'üíì', 'üíù', 'üíõ', 'üß°',
  'üíú', 'üíö', 'üíô', 'üå∑', 'üå∏', 'üå∫', 'ü•∫', 'üòª', 'üòΩ', 'üíü',
  'üéÄ', 'üéâ', 'ü•≥', 'üíÉ', 'üï∫', 'üç´', 'üçì', 'üç∞', 'üé∂', 'üåà',
  'üî•', 'üå™Ô∏è', 'üåä', '‚ö°', 'ü¶ã', 'üåª', 'üçí', 'üçØ', 'üç©', 'üç¶',
  'üíé', 'üëë', 'üïäÔ∏è', 'üåô', '‚≠ê', 'üéá', 'üéÜ', 'üí•', 'üéà', 'üéÅ',
  'ü§ó', 'üòá', 'ü•Ç', 'üç∑', 'üç∏', 'üé§', 'üé∏', 'üéπ', 'üß∏', 'üêæ'
];



  // Create emoji buttons in panel
  emojis.forEach(emoji => {
    const span = document.createElement('span');
    span.className = 'emoji';
    span.textContent = emoji;
    span.setAttribute('tabindex', '0');
    emojiPanel.appendChild(span);

    // Drag & drop support
    span.addEventListener('mousedown', startDrag);
    span.addEventListener('touchstart', startDrag, {passive: false});
  });

  let draggingEmoji = null;
  let offsetX = 0;
  let offsetY = 0;

  function startDrag(e) {
    e.preventDefault();
    const target = e.target;
    if (!target.classList.contains('emoji')) return;

    // Clone emoji for dragging
    draggingEmoji = target.cloneNode(true);
    draggingEmoji.classList.add('dragging', 'draggable-emoji');
    document.body.appendChild(draggingEmoji);

    // Calculate offset inside emoji where clicked/touched
    const rect = target.getBoundingClientRect();
    if(e.type.startsWith('touch')) {
      offsetX = e.touches[0].clientX - rect.left;
      offsetY = e.touches[0].clientY - rect.top;
    } else {
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
    }

    moveDrag(e);

    window.addEventListener('mousemove', moveDrag);
    window.addEventListener('touchmove', moveDrag, {passive: false});
    window.addEventListener('mouseup', endDrag);
    window.addEventListener('touchend', endDrag);
  }

  function moveDrag(e) {
    if (!draggingEmoji) return;
    e.preventDefault();

    let clientX, clientY;
    if(e.type.startsWith('touch')) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }

    draggingEmoji.style.left = (clientX - offsetX) + 'px';
    draggingEmoji.style.top = (clientY - offsetY) + 'px';
  }
  
const colorBtn = document.getElementById('colorBtn');
const loveLetterContent = document.getElementById('loveLetter');

function getRandomColor() {
  // Generate a random hex color code
  return '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');
}

colorBtn.addEventListener('click', () => {
  const randomColor = getRandomColor();

  // Apply random color to letter content and headings
  loveLetterContent.style.color = randomColor;
  document.querySelector('.glowing-heading').style.color = randomColor;
  document.querySelector('.subheading').style.color = randomColor;
});

  function endDrag(e) {
    if (!draggingEmoji) return;

    // Check if drop inside loveLetter container
    const letterRect = loveLetter.getBoundingClientRect();
    const emojiRect = draggingEmoji.getBoundingClientRect();

    // Calculate drop coords relative to loveLetter container
    const dropX = emojiRect.left - letterRect.left;
    const dropY = emojiRect.top - letterRect.top;

    if (
      emojiRect.left >= letterRect.left &&
      emojiRect.top >= letterRect.top &&
      emojiRect.right <= letterRect.right + 40 && // small margin for emoji size
      emojiRect.bottom <= letterRect.bottom + 40
    ) {
      // Append emoji inside loveLetter as absolutely positioned element
      const emojiElem = document.createElement('span');
      emojiElem.textContent = draggingEmoji.textContent;
      emojiElem.className = 'draggable-emoji';
      emojiElem.style.position = 'absolute';
      emojiElem.style.left = dropX + 'px';
      emojiElem.style.top = dropY + 'px';
      emojiElem.style.fontSize = '32px';
      emojiElem.style.cursor = 'move';
      emojiElem.style.userSelect = 'none';
      emojiElem.style.zIndex = '10';

      // Make emoji draggable inside letter after drop
      makeEmojiDraggable(emojiElem);

      loveLetter.appendChild(emojiElem);
    }

    draggingEmoji.remove();
    draggingEmoji = null;

    window.removeEventListener('mousemove', moveDrag);
    window.removeEventListener('touchmove', moveDrag);
    window.removeEventListener('mouseup', endDrag);
    window.removeEventListener('touchend', endDrag);
  }

  // Make existing emojis inside letter draggable after drop
  function makeEmojiDraggable(elem) {
    let isDragging = false;
    let startX, startY, origX, origY;

    function dragStart(e) {
      e.preventDefault();
      isDragging = true;

      const rect = elem.getBoundingClientRect();
      if(e.type.startsWith('touch')) {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
      } else {
        startX = e.clientX;
        startY = e.clientY;
      }
      origX = rect.left;
      origY = rect.top;

      elem.style.cursor = 'grabbing';

      window.addEventListener('mousemove', dragMove);
      window.addEventListener('touchmove', dragMove, {passive: false});
      window.addEventListener('mouseup', dragEnd);
      window.addEventListener('touchend', dragEnd);
    }
    function dragMove(e) {
      if (!isDragging) return;
      e.preventDefault();
      let clientX, clientY;
      if(e.type.startsWith('touch')) {
        clientX = e.touches[0].clientX;
        clientY = e.touches[0].clientY;
      } else {
        clientX = e.clientX;
        clientY = e.clientY;
      }
      const deltaX = clientX - startX;
      const deltaY = clientY - startY;

      // Calculate new position relative to loveLetter container
      const letterRect = loveLetter.getBoundingClientRect();

      let newLeft = origX + deltaX - letterRect.left;
      let newTop = origY + deltaY - letterRect.top;

      // Clamp inside letter
      newLeft = Math.max(0, Math.min(newLeft, letterRect.width - elem.offsetWidth));
      newTop = Math.max(0, Math.min(newTop, letterRect.height - elem.offsetHeight));

      elem.style.left = newLeft + 'px';
      elem.style.top = newTop + 'px';
    }
    function dragEnd(e) {
      if (!isDragging) return;
      isDragging = false;
      elem.style.cursor = 'move';
      window.removeEventListener('mousemove', dragMove);
      window.removeEventListener('touchmove', dragMove);
      window.removeEventListener('mouseup', dragEnd);
      window.removeEventListener('touchend', dragEnd);
    }

    elem.addEventListener('mousedown', dragStart);
    elem.addEventListener('touchstart', dragStart, {passive: false});
  }

  // Initialize existing emojis inside letter (if any)
  loveLetter.querySelectorAll('.draggable-emoji').forEach(makeEmojiDraggable);

  // Accessibility: allow emoji panel keyboard selection & adding emoji by Enter/Space
  emojiPanel.addEventListener('keydown', (e) => {
    if(e.target.classList.contains('emoji')) {
      if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        // Add emoji in center of loveLetter
        const letterRect = loveLetter.getBoundingClientRect();
        const emojiElem = document.createElement('span');
        emojiElem.textContent = e.target.textContent;
        emojiElem.className = 'draggable-emoji';
        emojiElem.style.position = 'absolute';
        emojiElem.style.left = (letterRect.width / 2 - 16) + 'px';
        emojiElem.style.top = (letterRect.height / 2 - 16) + 'px';
        emojiElem.style.fontSize = '32px';
        emojiElem.style.cursor = 'move';
        emojiElem.style.userSelect = 'none';
        emojiElem.style.zIndex = '10';

        makeEmojiDraggable(emojiElem);
        loveLetter.appendChild(emojiElem);
      }
    }
  });
</script>

</body>
</html>
