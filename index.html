<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Love Letter UI - Mobile Friendly</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: Arial, sans-serif;
    background: #f8f4ef;
    margin: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    color: #333;
  }
  #controls {
    margin-bottom: 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 14px 18px;
    align-items: center;
    justify-content: center;
    max-width: 600px;
    width: 100%;
  }
  label {
    font-weight: 600;
    font-size: 1rem;
  }
  select, button {
    padding: 8px 14px;
    font-size: 1rem;
    border-radius: 6px;
    border: 1.5px solid #ccc;
    background: white;
    cursor: pointer;
    transition: border-color 0.3s ease;
  }
  select:focus, button:focus {
    outline: none;
    border-color: #ff6b6b;
    box-shadow: 0 0 6px rgba(255,107,107,0.5);
  }
  button {
    background-color: #ff6b6b;
    color: white;
    border: none;
    font-weight: 700;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #e14b4b;
  }

  /* Love letter box */
  .love-letter {
    width: 100%;
    max-width: 600px;
    min-height: 400px;
    padding: 30px 38px;
    border-radius: 16px;
    box-shadow: 0 12px 25px rgba(0,0,0,0.2);
    background: white;
    color: #333;
    line-height: 1.6;
    user-select: text;
    outline: none;
    transition: background 0.4s ease, box-shadow 0.4s ease;
  }
  .love-letter:focus-within {
    box-shadow: 0 12px 35px rgba(255, 107, 107, 0.7);
  }

  /* Paper styles */
  .paper-style-1 {
    background: #fff9f6 url('https://www.transparenttextures.com/patterns/pw-maze-white.png') repeat;
    border: 1px solid #e8d7cd;
    box-shadow: inset 0 0 8px #d4b5a7;
  }
  .paper-style-2 {
    background: #fefcea url('https://www.transparenttextures.com/patterns/diagmonds-light.png') repeat;
    border: 2px dashed #e5d7a1;
  }
  .paper-style-3 {
    background: #f4f0ec url('https://www.transparenttextures.com/patterns/cloth-alike.png') repeat;
    border-left: 10px solid #d9c4b6;
  }
  .paper-style-4 {
    background: linear-gradient(135deg, #fff9f9 25%, #ffecec 100%);
    border: 1px solid #f1c0c0;
    background-image: url('https://www.transparenttextures.com/patterns/diamond-upholstery.png');
  }
  .paper-style-5 {
    background: #fff url('https://www.transparenttextures.com/patterns/linen.png') repeat;
    border: 2px double #d4b2b2;
  }
  .paper-style-6 {
    background: #fcfaf2 url('https://www.transparenttextures.com/patterns/reticula.png') repeat;
    border: 3px solid #c2b280;
    box-shadow: inset 0 0 5px #c2b280;
  }
  .paper-style-7 {
    background: linear-gradient(45deg, #f9f7f1 0%, #e6dcd0 100%);
    border: 1px solid #b5a99e;
    background-image: url('https://www.transparenttextures.com/patterns/batthern.png');
  }
  .paper-style-8 {
    background: #fffaf0 url('https://www.transparenttextures.com/patterns/french-tiles.png') repeat;
    border: 1px solid #e0c097;
    box-shadow: 0 0 15px rgba(224,192,151,0.3);
  }
  .paper-style-9 {
    background: #f6f1e7 url('https://www.transparenttextures.com/patterns/crissxcross.png') repeat;
    border: 4px ridge #d9c6b8;
  }
  .paper-style-10 {
    background: repeating-linear-gradient(
      45deg,
      #fff,
      #fff 10px,
      #f0e6d2 10px,
      #f0e6d2 20px
    );
    border: 2px solid #cfc3a6;
  }

  /* Fonts */
  .font-pacifico {
    font-family: 'Pacifico', cursive;
  }
  .font-dancing-script {
    font-family: 'Dancing Script', cursive;
  }
  .font-indie-flower {
    font-family: 'Indie Flower', cursive;
  }
  .font-roboto {
    font-family: 'Roboto', sans-serif;
  }
  .font-times-new-roman {
    font-family: 'Times New Roman', serif;
  }

  /* Editable text */
  .editable {
    outline: none;
    cursor: text;
  }
  .title {
    font-size: 2.4rem;
    margin-bottom: 16px;
    font-weight: 700;
  }
  .message {
    font-size: 1.3rem;
    margin-bottom: 26px;
  }
  .sender {
    font-size: 1.05rem;
    text-align: right;
    font-style: italic;
  }

  /* Accessibility helper */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0,0,0,0);
    border: 0;
  }

  /* Responsive */
  @media (max-width: 650px) {
    #controls {
      flex-direction: column;
      gap: 12px;
    }
    .love-letter {
      padding: 20px 24px;
      min-height: 360px;
    }
    .title {
      font-size: 2rem;
    }
    .message {
      font-size: 1.1rem;
    }
    .sender {
      font-size: 1rem;
    }
  }
</style>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Indie+Flower&family=Pacifico&family=Roboto&display=swap" rel="stylesheet" />

</head>
<body>

<div id="controls" aria-label="Controls for love letter">
  <label for="paperStyleSelect">Paper Style:</label>
  <select id="paperStyleSelect" aria-describedby="paperStyleDesc">
    <option value="paper-style-1" selected>Style 1</option>
    <option value="paper-style-2">Style 2</option>
    <option value="paper-style-3">Style 3</option>
    <option value="paper-style-4">Style 4</option>
    <option value="paper-style-5">Style 5</option>
    <option value="paper-style-6">Style 6</option>
    <option value="paper-style-7">Style 7</option>
    <option value="paper-style-8">Style 8</option>
    <option value="paper-style-9">Style 9</option>
    <option value="paper-style-10">Style 10</option>
  </select>
  <span id="paperStyleDesc" class="sr-only">Select the background style of the letter</span>

  <label for="fontSelect">Font:</label>
  <select id="fontSelect" aria-describedby="fontDesc">
    <option value="font-pacifico" selected>Pacifico</option>
    <option value="font-dancing-script">Dancing Script</option>
    <option value="font-indie-flower">Indie Flower</option>
    <option value="font-roboto">Roboto</option>
    <option value="font-times-new-roman">Times New Roman</option>
  </select>
  <span id="fontDesc" class="sr-only">Select font style for the letter</span>

  <button id="downloadBtn" title="Download love letter as PNG">Download PNG</button>
</div>

<div id="loveLetter" class="love-letter paper-style-1 font-pacifico" contenteditable="false" role="main" aria-label="Editable love letter">
  <h1 class="editable title" contenteditable="true" aria-label="Letter Title" spellcheck="true">My Beloved</h1>
  <p class="editable message" contenteditable="true" aria-label="Letter Message" spellcheck="true">
    Every moment with you is a treasure. Your smile brightens my darkest days, and your love fills my heart with joy.
  </p>
  <p class="editable sender" contenteditable="true" aria-label="Letter Sender" spellcheck="true">
    With love,<br />Your Sweetheart
  </p>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
  const loveLetter = document.getElementById('loveLetter');
  const paperStyleSelect = document.getElementById('paperStyleSelect');
  const fontSelect = document.getElementById('fontSelect');
  const downloadBtn = document.getElementById('downloadBtn');

  paperStyleSelect.addEventListener('change', () => {
    for(let i=1; i<=10; i++){
      loveLetter.classList.remove('paper-style-'+i);
    }
    loveLetter.classList.add(paperStyleSelect.value);
  });

  fontSelect.addEventListener('change', () => {
    loveLetter.classList.remove('font-pacifico', 'font-dancing-script', 'font-indie-flower', 'font-roboto', 'font-times-new-roman');
    loveLetter.classList.add(fontSelect.value);
  });

  downloadBtn.addEventListener('click', () => {
    // Remove focus for crisp canvas
    document.activeElement.blur();
    generateCanvasAndDownload();
  });

  async function generateCanvas() {
    return await html2canvas(loveLetter, {
      backgroundColor: null,
      scale: window.devicePixelRatio * 2,
      useCORS: true,
      scrollY: -window.scrollY,
    });
  }

  async function generateCanvasAndDownload() {
    const canvas = await generateCanvas();
    const link = document.createElement('a');
    link.download = 'love_letter.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
  }
</script>

</body>
</html>
